"use strict";

function testWebP(e) {
  let t = new Image();
  t.onload = t.onerror = function () {
    e(2 == t.height);
  }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}

testWebP(function (e) {
  1 == e ? (document.querySelector("body").classList.add("webp"), console.log("use webp")) : (document.querySelector("body").classList.add("no-webp"), console.log("not use webp"));
}), document.addEventListener("DOMContentLoaded", () => {
  const e = {
    list: []
  },
        t = document.querySelector(".add"),
        o = t.querySelector(".adding__input"),
        n = document.querySelector(".filmsListContainer").querySelector(".filmsList").querySelector(".filmsUlList");
  t.addEventListener("submit", l => {
    l.preventDefault();
    let i = o.value;

    if (i) {
      i.length > 14 && (i = i.substring(0, 14) + "..."), e.list.push(i), s(e.list, n), console.log(e.list), t.querySelector("[type='checkbox']:checked") && console.log("Добавляем любимый фильм");
    }

    l.target.reset();
  });

  const s = (t, o) => {
    e.list.sort(), o.innerHTML = "", t.forEach((e, t) => {
      o.innerHTML += `\n            <li class="promo__interactive-item">\n               ${t + 1}. ${e}\n               <div class="trash"></div>\n            </li>`;
    }), document.querySelectorAll(".trash").forEach((t, o) => {
      t.addEventListener("click", () => {
        t.parentElement.remove(), e.list.splice(o, 1);
      });
    });
  };
});